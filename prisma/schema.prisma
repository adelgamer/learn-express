generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
}

enum NotePrivacy {
  PRIVATE
  PUBLIC
}

enum NoteStatus {
  PUBLISHED
  DRAFT
}

model Note {
  id         String      @id @default(uuid())
  title      String      @db.VarChar(255)
  content    String      @db.Text
  privacy    NotePrivacy @default(PRIVATE)
  pinnedAt   DateTime?
  archivedAt DateTime?
  favorite   Boolean     @default(false)
  status     NoteStatus  @default(PUBLISHED)

  attachements Attachement[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt()
}

enum AttachementType {
  FILE
  IMAGE
  VIDEO
  AUDIO
}

model Attachement {
  id String @id @default(uuid())

  note   Note   @relation(fields: [noteId], references: [id])
  noteId String

  type AttachementType
  path String          @db.VarChar(255)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt()
}
